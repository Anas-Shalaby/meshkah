# ุฏููู ุชุทุจูู ููุฒุฉ "ุงูุฎุทูุฉ ุงููุดุชุฑูุฉ V1 Lite" - Frontend

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงูุฏููู ูุดุฑุญ ุฌููุน ุงูุชุบููุฑุงุช ุงููุทููุจุฉ ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Frontend) ูููุฒุฉ "ุงูุฎุทูุฉ ุงููุดุชุฑูุฉ V1 Lite".

---

## โ ุงูุชุบููุฑุงุช ุงูููุฌุฒุฉ

### 1. ุฅุถุงูุฉ ุญูู "ุงูุฎุทูุฉ ุงูุนูููุฉ ุงูููุชุฑุญุฉ" ูู Modal ุฅุถุงูุฉ/ุชุนุฏูู ุงูุชุฏุจุฑ

**ุงูููู:** `frontend/src/pages/QuranCampDetailsPage.jsx`

**ุงูุชุบููุฑุงุช:**
- โ ุฅุถุงูุฉ state: `const [proposedStep, setProposedStep] = useState("")`
- โ ุฅุถุงูุฉ `TextArea` ูู Modal ุฅุถุงูุฉ ุงูุชุฏุจุฑ (ุณุทุฑ ~3980)
- โ ุฅุถุงูุฉ `TextArea` ูู Modal ุญูุธ ุงููุงุฆุฏุฉ (ุณุทุฑ ~6463)
- โ ุฅุฑุณุงู `proposed_step` ูู ุฏุงูุฉ `updateTaskBenefits`
- โ ุฅุนุงุฏุฉ ุชุนููู `proposedStep` ุนูุฏ ุฅุบูุงู Modal

**ุงูููุฏ ุงููุถุงูุฉ:**
```jsx
{/* ุงูุฎุทูุฉ ุงูุนูููุฉ ุงูููุชุฑุญุฉ (ุงุฎุชูุงุฑู) */}
<div className="mb-4">
  <label className="block text-sm font-medium text-gray-700 mb-2">
    ุงูุฎุทูุฉ ุงูุนูููุฉ ุงูููุชุฑุญุฉ (ุงุฎุชูุงุฑู) ๐ฏ
  </label>
  <textarea
    value={proposedStep}
    onChange={(e) => setProposedStep(e.target.value)}
    placeholder="ูุซุงู: ุณุฃููู ุจุฅูุฏุงุก ูุชุงุจ ุฏููู ูุตุฏูู ูุฐุง ุงูุฃุณุจูุน..."
    rows={3}
    className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#7440E9] focus:border-[#7440E9] resize-none text-sm"
  />
  <p className="text-xs text-gray-500 mt-1">
    ุงูุชุฑุญ ุฎุทูุฉ ุนูููุฉ ูููู ููุขุฎุฑูู ุงูุงูุชุฒุงู ุจูุง ูุนู
  </p>
</div>
```

---

### 2. ุนุฑุถ ุงูุฎุทูุฉ ุงูููุชุฑุญุฉ ูู ูุงุนุฉ ุงูุชุฏุงุฑุณ ูุน ุฒุฑ "ุฃูุชุฒู ูุนู"

**ุงูููู:** `frontend/src/pages/QuranCampDetailsPage.jsx`

**ุงูุชุบููุฑุงุช:**
- โ ุฅุถุงูุฉ state: `pledgedSteps` ู `pledgingProgressId`
- โ ุฅูุดุงุก ุฏุงูุฉ `handlePledgeToJointStep` (ุณุทุฑ ~2336)
- โ ุนุฑุถ ุงูุฎุทูุฉ ุงูููุชุฑุญุฉ ูู ุจุทุงูุงุช ูุงุนุฉ ุงูุชุฏุงุฑุณ (ุณุทุฑ ~4434)
- โ ุฅุถุงูุฉ ุฒุฑ "ุฃูุชุฒู ูุนู" ูุน ุญุงูุฉ ุงูุชุญููู
- โ ุนุฑุถ ุฑุณุงูุฉ ุชุฃููุฏ ุจุนุฏ ุงูุงูุชุฒุงู

**ุงูููุฏ ุงููุถุงูุฉ:**
```jsx
{/* ุนุฑุถ ุงูุฎุทูุฉ ุงูุนูููุฉ ุงูููุชุฑุญุฉ */}
{item.proposed_step && (
  <div className="mb-3 sm:mb-4 mt-3 sm:mt-4 p-3 sm:p-4 bg-green-50 border-r-4 border-green-500 rounded-lg">
    <div className="flex items-start gap-2 sm:gap-3">
      <Target className="w-4 h-4 sm:w-5 sm:h-5 text-green-600 flex-shrink-0 mt-0.5" />
      <div className="flex-1">
        <h4 className="text-sm sm:text-base font-semibold text-green-800 mb-2">
          ุงูุฎุทูุฉ ุงูุนูููุฉ ุงูููุชุฑุญุฉ:
        </h4>
        <p className="text-sm sm:text-base text-green-700 leading-relaxed">
          {item.proposed_step}
        </p>
        {/* ุฒุฑ ุงูุงูุชุฒุงู */}
        {!item.is_own && !pledgedSteps.has(item.progress_id) && (
          <motion.button
            onClick={() => handlePledgeToJointStep(item.progress_id)}
            className="mt-3 px-4 py-2 bg-green-600 text-white rounded-lg..."
          >
            <CheckCircle className="w-4 h-4" />
            ุฃูุชุฒู ูุนู
          </motion.button>
        )}
      </div>
    </div>
  </div>
)}
```

---

### 3. ุนุฑุถ ูุดุงุท ุงูุงูุชุฒุงู ูู ุณุฌู ูุดุงุท ุงูุฃุตุฏูุงุก

**ุงูููู:** `frontend/src/components/ActivityItem.jsx`

**ุงูุชุบููุฑุงุช:**
- โ ุฅุถุงูุฉ case ุฌุฏูุฏ ูู `joint_step_pledged` ูู switch statement
- โ ุนุฑุถ ุจุทุงูุฉ ูุดุงุท ุงูุงูุชุฒุงู ูุน ุงูุฎุทูุฉ ุงูุนูููุฉ
- โ ุฅุถุงูุฉ ุฒุฑ "ูุฃูุง ูุนููุง" ููุงูุชุฒุงู ุงูุฌูุงุนู
- โ ุฅุถุงูุฉ ุฏุงูุฉ `handlePledgeToStep` ููุงูุชุฒุงู

**ุงูููุฏ ุงููุถุงูุฉ:**
```jsx
case "joint_step_pledged":
  icon = <Target className="w-5 h-5 text-green-500" />;
  iconColor = "text-green-500";
  const inspirerName = details?.inspirer_username || "ูุณุชุฎุฏู";
  const stepText = details?.proposed_step || "ุฎุทูุฉ ุนูููุฉ";
  message = `ุงูุชุฒู ูุน ${inspirerName} ุจู: "${stepText}"`;
  break;
```

---

### 4. ููุทู ุงุณุชุฏุนุงุก API ููุงูุชุฒุงู

**ุงูููู:** `frontend/src/pages/QuranCampDetailsPage.jsx` ู `frontend/src/components/ActivityItem.jsx`

**Endpoint:** `POST /api/quran-camps/progress/:progressId/pledge`

**ุงูุฏุงูุฉ:**
```javascript
const handlePledgeToJointStep = async (progressId) => {
  // 1. ุงูุชุญูู ูู ุงูุญุงูุฉ
  // 2. ุงุณุชุฏุนุงุก API
  // 3. ุชุญุฏูุซ state
  // 4. ุฅุนุงุฏุฉ ุฌูุจ ุงูุจูุงูุงุช
};
```

---

### 5. ุนุฑุถ ุงูุฎุทูุฉ ูู Journal Tab

**ุงูููู:** `frontend/src/pages/QuranCampDetailsPage.jsx`

**ุงูุชุบููุฑุงุช:**
- โ ุนุฑุถ ุงูุฎุทูุฉ ูู `myReflections` (ุณุทุฑ ~5185)
- โ ุนุฑุถ ุงูุฎุทูุฉ ูู `savedReflections` (ุณุทุฑ ~5473)
- โ ุฅุถุงูุฉ ุฒุฑ ุงูุงูุชุฒุงู ูู `savedReflections`

---

### 6. ุชุญุฏูุซ Backend API

**ุงููููุงุช ุงููุนุฏูุฉ:**
- โ `backend/controllers/quranCampsController.js`: ุฅุถุงูุฉ `proposed_step` ูู `getSavedReflections`

---

## ๐จ ุชุตููู ุงููุงุฌูุฉ

### ุงูุฃููุงู ุงููุณุชุฎุฏูุฉ:
- **ุฎูููุฉ ุงูุฎุทูุฉ:** `bg-green-50`
- **ุญุฏ ุงูุฎุทูุฉ:** `border-green-500`
- **ุฒุฑ ุงูุงูุชุฒุงู:** `bg-green-600` / `hover:bg-green-700`
- **ุฃููููุฉ:** `Target` (ุฃุฎุถุฑ)

### ุงูุฃููููุงุช ุงููุณุชุฎุฏูุฉ:
- `Target` - ููุฎุทูุฉ ุงูุนูููุฉ ุงูููุชุฑุญุฉ
- `CheckCircle` - ูุฒุฑ ุงูุงูุชุฒุงู
- `HandHeart` - ูุฒุฑ "ูุฃูุง ูุนููุง" ูู ActivityItem

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุชุญูู ูู ุงูุงูุชุฒุงู ุงูููุฑุฑ:** ูุชู ุงูุชุญูู ูู Backend. ุฅุฐุง ุญุงูู ุงููุณุชุฎุฏู ุงูุงูุชุฒุงู ูุฑุฉ ุฃุฎุฑูุ ุณูุธูุฑ ุฎุทุฃ.

2. **ุนุฑุถ ุฒุฑ ุงูุงูุชุฒุงู:** 
   - ูุธูุฑ ููุท ุฅุฐุง ูู ููู ุงููุณุชุฎุฏู ุตุงุญุจ ุงูุฎุทูุฉ (`!item.is_own`)
   - ูุธูุฑ ููุท ุฅุฐุง ูู ููุชุฒู ุงููุณุชุฎุฏู ุจูุง ูู ูุจู (`!pledgedSteps.has(item.progress_id)`)

3. **ุชุญุฏูุซ ุงูุจูุงูุงุช:** ุจุนุฏ ุงูุงูุชุฒุงูุ ูุชู ุฅุนุงุฏุฉ ุฌูุจ ูุญุชูู ูุงุนุฉ ุงูุชุฏุงุฑุณ ุชููุงุฆูุงู.

4. **ุงูุฎุตูุตูุฉ:** ูุชู ุงุญุชุฑุงู ุฅุนุฏุงุฏุงุช ุงูุฎุตูุตูุฉ (`hide_identity`) ูู ุงูุฅุดุนุงุฑุงุช.

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ:

1. **ุฅุถุงูุฉ ุฎุทูุฉ ุนูููุฉ:**
   - ุงูุชุญ Modal ุฅุถุงูุฉ ุงูุชุฏุจุฑ
   - ุงูุชุจ ุชุฏุจุฑุงู
   - ุงูุชุจ ุฎุทูุฉ ุนูููุฉ ููุชุฑุญุฉ
   - ุงุญูุธ
   - ุชุญูู ูู ุธููุฑ ุงูุฎุทูุฉ ูู ูุงุนุฉ ุงูุชุฏุงุฑุณ

2. **ุงูุงูุชุฒุงู ุจุฎุทูุฉ:**
   - ุงูุชุญ ูุงุนุฉ ุงูุชุฏุงุฑุณ
   - ุงุจุญุซ ุนู ุชุฏุจุฑ ูุญุชูู ุนูู ุฎุทูุฉ ุนูููุฉ
   - ุงุถุบุท "ุฃูุชุฒู ูุนู"
   - ุชุญูู ูู ุธููุฑ ุฑุณุงูุฉ ุงููุฌุงุญ
   - ุชุญูู ูู ุชุนุทูู ุงูุฒุฑ

3. **ุนุฑุถ ุงููุดุงุท:**
   - ุงูุชุญ ุชุจููุจ ุงูุตุญุจุฉ
   - ุชุญูู ูู ุธููุฑ ูุดุงุท "ุงูุชุฒู ูุน [ุงุณู] ุจู: [ุฎุทูุฉ]"
   - ุงุถุบุท "ูุฃูุง ูุนููุง" ุฅุฐุง ูุงูุช ุงูุฎุทูุฉ ููุฌูุฏุฉ

---

## ๐ ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ (V2)

- ุฅุถุงูุฉ ุนุฏุฏ ุงูููุชุฒููู
- ุฅุถุงูุฉ ูุงุฆูุฉ ุงูููุชุฒููู
- ุฅุถุงูุฉ ูุธุงู ุชุชุจุน ุงูุชูุฏู
- ุฅุถุงูุฉ ุฅุดุนุงุฑุงุช ุชุฐููุฑูุฉ

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 2025-01-XX  
**ุงูุฅุตุฏุงุฑ:** V1 Lite

